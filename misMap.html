<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="博慧斯-专注于糖尿病检测，预防，健康管理和提升的一体化智能平台" />
    <title>博慧斯数据管理平台</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <script language="javascript" type="text/javascript" src="lib/map/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="lib/map/echarts.min.js"></script>
    <script language="javascript" type="text/javascript" src="lib/map/china.js"></script>
</head>
<body>
<header>
    <h1><a href="#">博慧斯</a></h1>
    <ul class="menu">
        <li><a href="index.html"><div class="menu-1"></div>
            <br/>首页</a></li>
        <li><a href="dataAna.html"><div class="menu-2"></div>
            <br/>数据分析</a></li>
        <li class="ck"><a href="#"><div class="menu-3"></div>
            <br/>糖化中国</a></li>
        <li><a href="savePage.html"><div class="menu-4"></div>
            <br/>系统设置</a></li>
    </ul>
    <ul class="login">
        <li><a href="#"><img src="images/login-01.png" alt="">&nbsp;管理员登录&nbsp;</a></li>
        <li><a href="#"><img src="images/login-02.png" alt="">&nbsp;退出&nbsp;</a></li>
    </ul>
</header>
<div class="main" style="background-color:#404a59;">
    <!--<h3>数据统计分析: </h3>-->
    <div style="display:flex;flex-direction:column;background-color:#404a59;">
        <div id="chart1" style="width: 100%; height: 800px;"></div>
        <div id="chart2" style="width: 100%; height: 800px;"></div>
        <div id="chart3" style="width: 100%; height: 800px;"></div>
    </div>
</div>
<script>
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var geoCoord = geoCoordMap[data[i].name];
            if (geoCoord) {
                res.push({
                    name: data[i].name,
                    value: geoCoord.concat(data[i].value)
                });
            }
        }
        return res;
    };
    var convertData2 = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push({
                    fromName: dataItem[0].name,
                    toName: dataItem[1].name,
                    coords: [fromCoord, toCoord]
                });
            }
        }
        return res;
    };
    /*--------------------001--------------------------------*/
    var char1Data = [];
    var geoCoordMap = {};
    $(function(){
        $.get('lib/map/a1c.json', function (a1cdata) {
            char1Data = eval(a1cdata);
            var chart1 = echarts.init(document.getElementById("chart1"));
            option1 = {
                backgroundColor: '#404a59',
                title : {
                    text: '博慧斯点亮中国',
                    left: 'center',
                    textStyle: {
                        color: '#fff'
                    }
                },
                tooltip: {},
                legend: {
                    orient: 'vertical',
                    y: 'top',
                    show:false,
                    x:'right',
                    data: ['糖化测试分布'],
                    textStyle: {
                        color: '#ccc'
                    }
                },
                geo: {
                    map: 'china',
                    label: {
                        emphasis: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            areaColor: '#323c48',
                            borderColor: '#404a59'
                        },
                        emphasis: {
                            areaColor: '#2a333d'
                        }
                    }
                },
                visualMap: {
                    min: 3,
                    max: 16,
                    left: 'center',
                    orient:'horizontal',
                    top: 'bottom',
                    calculable: false,
                    text: ['分布密度高','分布密度低'],
                    inRange: {
                        color: ['#258CF9', '#0EF1F2', '#FFFFFF']
                    },
                    textStyle: {
                        color: '#fff'
                    }
                },
                series: [
                    {
                        name: '糖化测试分布',
                        type: 'scatter',
                        coordinateSystem: 'geo',
                        symbolSize: 2,
                        large: true,
                        itemStyle: {
                            normal: {
                                shadowBlur: 1,
                                shadowColor: 'rgba(255, 255, 255, 0.8)',
                                color: 'rgba(255, 255, 255, 0.8)'
                            }
                        },
                        data: char1Data//convertData(cityValueArray),//char1Data,//
                    }
                ]
            };
            if (option1 && typeof option1 === "object") {
                chart1.setOption(option1, true);
            }
        });

        $.get('lib/map/geoCoordMap.json', function (temp) {
            geoCoordMap = eval(temp);
            var BJData = [
                [{name:'无锡'}, {name:'北京',value:100}],
                [{name:'无锡'}, {name:'南通',value:14}],
                [{name:'无锡'}, {name:'上海',value:63}],
                [{name:'无锡'}, {name:'常州',value:36}],
                [{name:'无锡'}, {name:'张家口',value:10}],
                [{name:'无锡'}, {name:'乌鲁木齐',value:17}],
                [{name:'无锡'}, {name:'桂林',value:16}],
                [{name:'无锡'}, {name:'贵阳',value:16}],
                [{name:'无锡'}, {name:'珠海',value:18}],
                [{name:'无锡'}, {name:'郑州',value:11}],
                [{name:'无锡'}, {name:'汕头',value:19}],
                [{name:'无锡'}, {name:'广州',value:10}],
                [{name:'无锡'}, {name:'临沂',value:13}],
                [{name:'无锡'}, {name:'西安',value:17}],
                [{name:'无锡'}, {name:'深圳',value:45}],
                [{name:'无锡'}, {name:'南京',value:87}],
                [{name:'无锡'}, {name:'长春',value:23}],
            ];
            var SData = [
                [{name:'无锡'}, {name:'重庆',value:1}],
                [{name:'无锡'}, {name:'秦皇岛',value:8}],
                [{name:'无锡'}, {name:'福州',value:3}],
                [{name:'无锡'}, {name:'遵义',value:5}],
                [{name:'无锡'}, {name:'潮州',value:8}],
                [{name:'无锡'}, {name:'天津',value:7}],
                [{name:'无锡'}, {name:'大连',value:2}],
                [{name:'无锡'}, {name:'承德',value:2}],
                [{name:'无锡'}, {name:'咸阳',value:2}],
                [{name:'无锡'}, {name:'武汉',value:1}],
                [{name:'无锡'}, {name:'南昌',value:3}],
                [{name:'无锡'}, {name:'湛江',value:2}],
                [{name:'无锡'}, {name:'杭州',value:7}],
                [{name:'无锡'}, {name:'淮安',value:5}],
                [{name:'无锡'}, {name:'三亚',value:2}],
                [{name:'无锡'}, {name:'唐山',value:2}],
                [{name:'无锡'}, {name:'衢州',value:9}],
                [{name:'无锡'}, {name:'济南',value:4}],
                [{name:'无锡'}, {name:'扬州',value:3}],
                [{name:'无锡'}, {name:'济宁',value:9}],
                [{name:'无锡'}, {name:'邢台',value:1}],
                [{name:'无锡'}, {name:'西宁',value:1}],
                [{name:'无锡'}, {name:'沈阳',value:3}],
                [{name:'无锡'}, {name:'兰州',value:3}],
                [{name:'无锡'}, {name:'哈尔滨',value:2}],
                [{name:'无锡'}, {name:'宝鸡',value:2}],
                [{name:'无锡'}, {name:'石家庄',value:3}],
                [{name:'无锡'}, {name:'揭阳',value:2}],
            ];
            var chart2 = echarts.init(document.getElementById("chart2"));
            option2 = {
                backgroundColor: '#404a59',
                title : {
                    text: '博慧斯市场覆盖分布',
                    left: 'center',
                    textStyle : {
                        color: '#fff'
                    }
                },
                tooltip : {},
                legend: {
                    show:false,
                    orient: 'vertical',
                    y: 'top',
                    x:'right',
                    data: ['销售数量分布'],
                    textStyle: {
                        color: '#ccc'
                    }
                },
                visualMap: {
                    min: 2,
                    max: 40,
                    left: 'center',
                    orient:'horizontal',
                    top: 'bottom',
                    calculable: false,
                    text: ['测量记录多','测量记录少'],
                    inRange: {
                        //color: ['#ff3333', 'orange', 'yellow','lime','aqua']
                        color: ['aqua', 'lime', 'yellow']
                    },
                    textStyle: {
                        color: '#fff'
                    }
                },
                geo: {
                    map: 'china',
                    label: {
                        emphasis: {
                            show: false
                        }
                    },
                    roam: false,
                    itemStyle: {
                        normal: {
                            areaColor: '#323c48',
                            borderColor: '#404a59'
                        },
                        emphasis: {
                            areaColor: '#2a333d'
                        }
                    }
                },
                series: [
                    {
                        // dynamic
                        name: '销售数量分布',
                        type: 'lines',
                        zlevel: 1,
                        effect: {
                            show: true,
                            period: 6,
                            trailLength: 0.7,
                            color: '#fff',
                            symbolSize: 1
                        },
                        lineStyle: {
                            normal: {
                                color: 'yellow',
                                width: 0,
                                curveness: 0.2
                            }
                        },
                        data: convertData2(BJData)
                    },
                    {
                        // line
                        name: '销售数量分布',
                        type: 'lines',
                        zlevel: 2,
                        symbol: ['none', 'arrow'],
                        symbolSize: 5,
                        effect: {
                            show: true,
                            period: 6,
                            trailLength: 0,
                            symbol: 'emptyCircle',
                            symbolSize: 1
                        },
                        lineStyle: {
                            normal: {
                                color: 'yellow',
                                width: 1,
                                opacity: 0.6,
                                curveness: 0.2
                                //type: 'dashed',
                            }
                        },
                        data: convertData2(BJData)
                    },
                    {
                        // dot
                        name: '销售数量分布',
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        zlevel: 2,
                        rippleEffect: {
                            brushType: 'stroke'
                        },
                        label: {
                            normal: {
                                show: true,
                                position: 'right',
                                formatter: '{b}',
                                textStyle:{
                                    //color: '#fff',
                                    fontStyle: 'normal',
                                    fontWeight: 'normal',
                                    fontFamily: 'sans-serif',
                                    fontSize: 0
                                }
                            }
                        },
                        symbolSize: function (val) {
                            return val[2]/5;
                        },
                        itemStyle: {
                            normal: {
                                color: '#1E90FF'
                            }
                        },
                        data: BJData.map(function (dataItem) {
                            return {
                                name: dataItem[1].name,
                                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                            };
                        })
                    },

                    {
                        // line
                        name: '销售数量分布',
                        type: 'lines',
                        zlevel: 2,
                        symbol: ['none', 'circle'],
                        symbolSize: 1,

                        lineStyle: {
                            normal: {
                                color: '#1E90FF',
                                width: 1,
                                opacity: 0.6,
                                curveness: 0.2,
                                type: 'dashed',
                            }
                        },
                        data: convertData2(SData)
                    },

                    {
                        // dot
                        name: '销售数量分布',
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        zlevel: 2,
                        rippleEffect: {
                            brushType: 'stroke'
                        },
                        label: {
                            normal: {

                                show: false,
                                position: 'right',
                                formatter: '{b}'
                            }
                        },
                        symbolSize: function (val) {
                            return val[2]/2;
                        },
                        itemStyle: {
                            normal: {
                                color: '#1E90FF'
                            }
                        },
                        data: SData.map(function (dataItem) {
                            //console.log(dataItem[1].name)
                            return {
                                name: dataItem[1].name,
                                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                            };
                        })
                    }
                ]
            };
            if (option2 && typeof option2 === "object") {
                chart2.setOption(option2, true);
            }
        });
    });
    /*--------------------002--------------------------------*/
    function randomData() {
        return Math.round(Math.random()*1000);
    }
    var chart3 = echarts.init(document.getElementById("chart3"));
    option3 = {
        backgroundColor: '#404a59',
        title : {
            text: '糖化中国地图',
            left: 'center',
            textStyle : {
                color: '#fff'
            }
        },
        tooltip: {},

        visualMap: {
            min: 0,
            max: 500,
            calculable: false,
            left: 'center',
            orient:'horizontal',
            top: 'bottom',
//            text: ['High','Low'],
            seriesIndex: [1],
            text: ['糖化严重程度高','糖化严重程度低'],
            inRange: {
                color: ['aqua', 'lime', 'yellow','orange','#ff3333']

            },
            textStyle: {
                color: '#fff'
            }
        },
        geo: {
            map: 'china',
            roam: false,
            label: {
                normal: {
                    show: false,
                    textStyle: {
                        color: 'rgba(255,255,255,0.4)'
                    }
                }
            },
            itemStyle: {
                normal: {
                    areaColor: '#323c48',
                    borderColor: '#404a59'
                },
                emphasis: {
                    areaColor: '#2a333d'
                }
            }
        },
        series : [
            {
                name: '全国',
                type: 'scatter',
                coordinateSystem: 'geo',
                data: [],
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        show: false
                    },
                    emphasis: {
                        show: true,
                    }
                },
                itemStyle: {
                    normal: {
                        color: '#F06C00'
                    }
                }
            },
            {
                name: '糖化中国地图',
                type: 'map',
                geoIndex: 0,
                data:[
                    {name: '辽宁', value:3},
                    {name: '贵州', value:6},
                    {name: '北京', value:162},
                    {name: '黑龙江', value:2},
                    {name: '广西', value:8},
                    {name: '广东', value:56},
                    {name: '上海', value:22},
                    {name: '甘肃', value:2},
                    {name: '山东', value:16},
                    {name: '江西', value:2},
                    {name: '福建', value:1},
                    {name: '河北', value:14},
                    {name: '吉林', value:17},
                    {name: '天津', value:6},
                    {name: '安徽', value:1},
                    {name: '陕西', value:7},
                    {name: '新疆', value:13},
                    {name: '四川', value:1},
                    {name: '重庆', value:3},
                    {name: '江苏', value:449},
                    {name: '河南', value:9},
                    {name: '浙江', value:10},
                    {name: '云南',value: 0 },
                    {name: '湖南',value: 0 },
                    {name: '湖北',value: 0 },
                    {name: '山西',value: 0 },
                    {name: '内蒙古',value: 0 },
                    {name: '青海',value: 0 },
                    {name: '西藏',value: 0 },
                    {name: '宁夏',value: 0 },
                    {name: '海南',value: 0},
                    {name: '台湾',value: 0},
                    {name: '香港',value: 0 },
                    {name: '澳门',value: 0 }
                ]
            }
        ]
    };
    if (option3 && typeof option3 === "object") {
        chart3.setOption(option3, true);
    }
    /*--------------------003--------------------------------*/
</script>
</body>
</html>